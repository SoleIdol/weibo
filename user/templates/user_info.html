{% extends 'base.html' %}

{% block ext_css %}
    <link rel="stylesheet" href="/static/css/user_info.css">
{% endblock %}

{% block content %}
    <div class="form_div">
        <h2>用户信息</h2>
        <hr>
        <form action="/user/info/" method="post" enctype="multipart/form-data">
            <div class="form-group">
                <label>账户</label>
                <input type="text" class="form-control" name="name" value="{{ user.name }}" placeholder="用户名">
            </div>

            <div class="form-group">
                <label>性别</label><br>
                <label class="radio-inline">
                    <input type="radio" name="gender" id="inlineRadio1" value="男"
                           {% if user.gender == '男' %}checked{% endif %}> 男
                </label>
                <label class="radio-inline">
                    <input type="radio" name="gender" id="inlineRadio2" value="女"
                           {% if user.gender == '女' %}checked{% endif %}> 女
                </label>
                <label class="radio-inline">
                    <input type="radio" name="gender" id="inlineRadio2" value="保密"
                           {% if user.gender == '保密' %}checked{% endif %}> 保密
                </label>
            </div>

            <div class="form-group">
                <label>头像</label>
                <input type="file" name="head" onchange="change(this)">
                <img src="/static/upload/img/{{ user.head }}" id="head" alt="您的头像被外星人偷走了">
            </div>

            <div class="form-group">
                <label>所在城市</label>
                <input type="text" class="form-control" name="city" value="{{ user.city }}" placeholder="所在城市">
            </div>

            <div class="form-group">
                <label>出生日期</label>
                <input type="date" class="form-control" name="birthday" value="{{ user.birthday }}"
                       max="2020-12-31" min="1910-1-1" style="line-height: 23px;">
            </div>
            <div class="form-group">
                <label>注册时间</label>
                <input type="text" class="form-control" value="{{ user.reg_time }}" readonly>
            </div>

            <button type="submit" class="btn btn-default">修改</button>
            <button type="reset" class="btn btn-default">重置</button>
        </form>
    </div>

{% endblock %}

{% block ext_js %}
    <script>
        function change(own) {
            console.log(own);
            console.log(own.files[0].name);
            $('#head').src = own.value
        }
    </script>
{% endblock %}